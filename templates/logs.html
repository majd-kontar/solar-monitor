<!DOCTYPE html>
<html lang="en">
<head>
    <script src="../static/index.js" type="text/javascript"></script>
    <link type="text/css" rel="stylesheet" href="../static/index.css">

    <meta charset="UTF-8">
    <title>Solar Monitor</title>
</head>
<a href="/">
    <h1>Solar Monitor</h1>
</a>
<body>
{% if 'Error code' in data %}
    <p>An error occurred!</p>
{% else %}
    <div class="content">
        <h2>Status</h2>

    </div>
    <div class="content">
        <h2>Logs</h2>
        <table>
            <tr>
                <th>Time</th>
                <th>Grid Voltage</th>
                <th class="hide">PV Voltage</th>
                <th>PV Current</th>
                <th>PV Power</th>
                <th>Battery Voltage</th>
                <th>Battery Capacity</th>
                <th>Battery Charging Current</th>
                <th>Battery Discharge Current</th>
                <th class="hide">Output Voltage</th>
                <th class="hidden">Output Current</th>
                <th>Output Power</th>
                <th class="hide">Total generation</th>
                <th class="hidden">Today generation</th>
            </tr>
            {% for i in range(data['Timestamp']|length) %}
                <tr>
                    <td>{{ data['Timestamp'][i] }}</td>
                    <td>{{ data['Grid Voltage'][i] }}</td>
                    <td class="hide">{{ data['PV1 Input Voltage'][i] }}</td>
                    <td>{{ data['PV1 Input Current'][i] }}</td>
                    <td>{{ data['PV1 Charging Power'][i] }}</td>
                    <td>{{ data['Battery Voltage'][i] }}</td>
                    <td>{{ data['Battery Capacity'][i] }}</td>
                    <td>{{ data['Battery Charging Current'][i] }}</td>
                    <td>{{ data['Battery Discharge Current'][i] }}</td>
                    <td class="hide">{{ data['AC Output Voltage'][i] }}</td>
                    <td class="hidden">{{ (data['AC Output Active Power'][i]|float /data['AC Output Voltage'][i]|float)|round(2) }}</td>
                    <td>{{ data['AC Output Active Power'][i] }}</td>
                    <td class="hide">{{ data['Total generation'][i] }}</td>
                    <td class="hidden">{{ data['Today generation'][i] }}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
{% endif %}
</body>
<footer>
    <p class="copyright-text">Copyright Â© 2022 All Rights Reserved by MajdK.</p>
</footer>
</html>