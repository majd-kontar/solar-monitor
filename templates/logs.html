<!DOCTYPE html>
<html lang="en">
<head>
    <script src="static/index.js" type="text/javascript"></script>
    <meta charset="UTF-8">
    <title>Solar Monitor</title>
</head>
<a href="/">
    <h1>Solar Monitor</h1>
</a>
<body>
<h2>Logs</h2>
{% if 'Error code' in data %}
    <p>An error occurred!</p>
{% else %}
    <table>
        <tr>
            <th>Time</th>
            <th>Grid Voltage</th>
            <th>PV Voltage</th>
            <th>PV Current</th>
            <th>PV Power</th>
            <th>Battery Voltage</th>
            <th>Battery Capacity</th>
            <th>Battery Charging Current</th>
            <th>Battery Discharge Current</th>
            <th>Output Voltage</th>
            <th>Output Current</th>
            <th>Output Power</th>
            <th>Total generation</th>
            <th>Today generation</th>
        </tr>
        {% for i in range(data['Timestamp']|length) %}
            <tr>
                <td>{{ data['Timestamp'][i] }}</td>
                <td>{{ data['Grid Voltage'][i] }}</td>
                <td>{{ data['PV1 Input Voltage'][i] }}</td>
                <td>{{ data['PV1 Input Current'][i] }}</td>
                <td>{{ data['PV1 Charging Power'][i] }}</td>
                <td>{{ data['Battery Voltage'][i] }}</td>
                <td>{{ data['Battery Capacity'][i] }}</td>
                <td>{{ data['Battery Charging Current'][i] }}</td>
                <td>{{ data['Battery Discharge Current'][i] }}</td>
                <td>{{ data['AC Output Voltage'][i] }}</td>
                <td>{{ (data['AC Output Active Power'][i]|float /data['AC Output Voltage'][i]|float)|round(2) }}</td>
                <td>{{ data['AC Output Active Power'][i] }}</td>
                <td>{{ data['Total generation'][i] }}</td>
                <td>{{ data['Today generation'][i] }}</td>
            </tr>
        {% endfor %}
    </table>
{% endif %}
</body>
<footer>
    <p class="copyright-text">Copyright Â© 2022 All Rights Reserved by MajdK.</p>
</footer>
</html>