<!DOCTYPE html>
<html lang="en">
<head>
    <script src="static/index.js" type="text/javascript"></script>
    <meta charset="UTF-8">
    <title>Solar Monitor</title>
</head>
<a href="/">
    <h1>Solar Monitor</h1>
</a>
<body>
<h2>Latest Log</h2>
{% if 'Error code' in data %}
    <p>An error occurred!</p>
{% else %}
    <table>
        <tr>
            <th>Time</th>
            <th>Grid Voltage</th>
            <th>PV Voltage</th>
            <th>PV Current</th>
            <th>PV Power</th>
            <th>Battery Voltage</th>
            <th>Battery Capacity</th>
            <th>Battery Charging Current</th>
            <th>Battery Discharge Current</th>
            <th>Output Voltage</th>
            <th>Output Current</th>
            <th>Output Power</th>
            <th>Total generation</th>
            <th>Today generation</th>
        </tr>
        <tr>
            <td>{{ data['Timestamp'] }}</td>
            <td>{{ data['Grid Voltage'] }}</td>
            <td>{{ data['PV1 Input Voltage'] }}</td>
            <td>{{ data['PV1 Input Current'] }}</td>
            <td>{{ data['PV1 Charging Power'] }}</td>
            <td>{{ data['Battery Voltage'] }}</td>
            <td>{{ data['Battery Capacity'] }}</td>
            <td>{{ data['Battery Charging Current'] }}</td>
            <td>{{ data['Battery Discharge Current'] }}</td>
            <td>{{ data['AC Output Voltage'] }}</td>
            <td>{{ (data['AC Output Active Power']|float /data['AC Output Voltage']|float)|round(2) }}</td>
            <td>{{ data['AC Output Active Power'] }}</td>
            <td>{{ data['Total generation'] }}</td>
            <td>{{ data['Today generation'] }}</td>
        </tr>
    </table>
{% endif %}
<button onclick=window.location.href='/get_data'>View Logs</button>
</body>
<footer>
    <p class="copyright-text">Copyright Â© 2022 All Rights Reserved by MajdK.</p>
</footer>
</html>